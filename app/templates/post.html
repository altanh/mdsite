{% extends "base.html" %}
{% block title %}new post{% endblock %}
{% block head %}
  {{ super() }}
  <script src="https://unpkg.com/stackedit-js@1.0.7/docs/lib/stackedit.min.js"></script>
  <script>
    var edit = function() {
      const el = document.querySelector('textarea');
      const stackedit = new Stackedit();

      // Open the iframe
      stackedit.openFile({
        name: 'Filename', // with an optional filename
        content: {
          text: el.value // and the Markdown content.
        }
      });

      // Listen to StackEdit events and apply the changes to the textarea.
      stackedit.on('fileChange', (file) => {
        el.value = file.content.text;
      });
    }
  </script>
{% endblock %}
{% block content %}
  <div class="row" style="display: flex;">
    <div class="col-10 font-regular">
      <textarea style="font-family: 'Inconsolata', monospace; height: 100%;"></textarea>
    </div>
    <div class="col-2">
      <div class="row">
        <div class="col-12">
          <a class="button-sq" href="javascript:void(0)" onclick="edit()">StackEdit</a>
        </div>
      </div>
      <div class="row">
        <div class="col-12">
          <a class="button-sq" href="javascript:void(0)">Post</a>
        </div>
      </div>
    </div>
  </div>
{% endblock %}